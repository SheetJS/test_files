Test Packs,description,environment,branch,Database,IMAppli,Admin,Other instances,Oracle,Branch_db_id,Phalanger Directory,DIR (ROOT),DIR (bin),DIR (logs),DIR (history),,SQL results,RESULT file name,SQL code, ,,Setup,,,,,,
CURRENT (do not touch),,,,,,,,,,,,,,,,Snapshot before COB,testpack_COB_snapshot_before,"-- [COB => quick Snapshot of Database... before launching the COB]select ""WHAT ?"", ""Type"", ""Status"", ""Nb"" from (select 'Custody Movements' as ""WHAT ?"", 1 as ""Tri"",       mvt.cy_mvt_type as ""Type"",       mvt.status as ""Status"",       count(*) as ""Nb""from cy_mvt mvt, cy_trx trxwhere mvt.cy_trx_db_id = trx.cy_trx_db_id and trx.branch_db_id = <BRANCH>group by mvt.status,mvt.cy_mvt_type UNION select '                                   **********',2 as ""Tri"",null,null,null from DUAL UNIONselect 'Clearing Instructions' as ""WHAT ?"", 3 as ""Tri"",       i.type as ""Type"",       i.mp_status as ""Status"",       count(*) as ""Nb""from inx iwhere i.branch_db_id = <BRANCH>group by i.type, i.mp_status UNION select '                                   **********',4 as ""Tri"",null,null,null from DUAL UNIONselect 'RCA' as ""WHAT ?"", 5 as ""Tri"",       null as ""Type"",       null as ""Status"",       count(*) as ""Nb""from rca UNION select '                                   **********',6 as ""Tri"",null,null,null from DUAL UNIONselect 'Clients' as ""WHAT ?"", 7 as ""Tri"",       null as ""Type"",       clt.validation_status as ""Status"",       count(*) as ""Nb""from client clt  where clt.branch_db_id= <BRANCH>group by clt.validation_status UNION select '                                   **********',8 as ""Tri"",null,null,null from DUAL UNIONselect 'Safekeeping Accounts (for ACTIVE clients)' as ""WHAT ?"", 9 as ""Tri"",       sfk.sfk_acc_type as ""Type"",       null as ""Status"",       count(*) as ""Nb""from sfk_acc sfk, client cltwhere sfk.client_db_id=clt.client_db_id and clt.branch_db_id= <BRANCH> and clt.validation_status = 'ACTI'group by sfk.sfk_acc_type UNION select '                                   **********',10 as ""Tri"",null,null,null from DUAL UNIONselect 'Cash Accounts' as ""WHAT ?"", 11 as ""Tri"",       null as ""Type"",       null as ""Status"",       count(*) as ""Nb""from int_cash_acc ica, client cltwhere ica.ca_status = 'ACTI' and ica.client_db_id=clt.client_db_id UNION select '                                   **********',12 as ""Tri"",null,null,null from DUAL UNIONselect 'Firm Positions' as ""WHAT ?"", 13 as ""Tri"",       null as ""Type"",       null as ""Status"",       count(*) as ""Nb""from sec_pos_firm spf where spf.sec_pos_key_db_id in ( select spk.sec_pos_key_db_id from SEC_POS_KEY spk where spk.sec_pos_key_db_id in ( select ic2.sec_pos_key_db_id from inx i2, INX_client_info ic2 where ic2.inx_db_id = i2.inx_db_id and i2.branch_db_id = <BRANCH> group by ic2.sec_pos_key_db_id)) UNION select '                                   **********',14 as ""Tri"",null,null,null from DUAL UNIONselect 'Credit Lines' as ""WHAT ?"", 15 as ""Tri"",       cl.credit_line_type as ""Type"",       null as ""Status"",       count(*) as ""Nb""from credit_line clwhere cl.branch_db_id = <BRANCH>group by cl.credit_line_typeorder by ""Tri"");", ,,export ORACLE_HOME=/apps/oracle/current/,,,,,,
MIL,MILAN,pf1,ITMM,atpeur90.fr.net.intra,titss210,titss202,titss314,titss404,409,data,TestPack,bin,logs,.,,Snapshot after COB,testpack_COB_snapshot_after,"-- [COB => quick Snapshot of Database... before launching the COB]select ""WHAT ?"", ""Type"", ""Status"", ""Nb"" from (select 'Custody Movements' as ""WHAT ?"", 1 as ""Tri"",       mvt.cy_mvt_type as ""Type"",       mvt.status as ""Status"",       count(*) as ""Nb""from cy_mvt mvt, cy_trx trxwhere mvt.cy_trx_db_id = trx.cy_trx_db_id and trx.branch_db_id = <BRANCH>group by mvt.status,mvt.cy_mvt_type UNION select '                                   **********',2 as ""Tri"",null,null,null from DUAL UNIONselect 'Clearing Instructions' as ""WHAT ?"", 3 as ""Tri"",       i.type as ""Type"",       i.mp_status as ""Status"",       count(*) as ""Nb""from inx iwhere i.branch_db_id = <BRANCH>group by i.type, i.mp_status UNION select '                                   **********',4 as ""Tri"",null,null,null from DUAL UNIONselect 'RCA' as ""WHAT ?"", 5 as ""Tri"",       null as ""Type"",       null as ""Status"",       count(*) as ""Nb""from rca UNION select '                                   **********',6 as ""Tri"",null,null,null from DUAL UNIONselect 'Clients' as ""WHAT ?"", 7 as ""Tri"",       null as ""Type"",       clt.validation_status as ""Status"",       count(*) as ""Nb""from client clt  where clt.branch_db_id= <BRANCH>group by clt.validation_status UNION select '                                   **********',8 as ""Tri"",null,null,null from DUAL UNIONselect 'Safekeeping Accounts (for ACTIVE clients)' as ""WHAT ?"", 9 as ""Tri"",       sfk.sfk_acc_type as ""Type"",       null as ""Status"",       count(*) as ""Nb""from sfk_acc sfk, client cltwhere sfk.client_db_id=clt.client_db_id and clt.branch_db_id= <BRANCH> and clt.validation_status = 'ACTI'group by sfk.sfk_acc_type UNION select '                                   **********',10 as ""Tri"",null,null,null from DUAL UNIONselect 'Cash Accounts' as ""WHAT ?"", 11 as ""Tri"",       null as ""Type"",       null as ""Status"",       count(*) as ""Nb""from int_cash_acc ica, client cltwhere ica.ca_status = 'ACTI' and ica.client_db_id=clt.client_db_id UNION select '                                   **********',12 as ""Tri"",null,null,null from DUAL UNIONselect 'Firm Positions' as ""WHAT ?"", 13 as ""Tri"",       null as ""Type"",       null as ""Status"",       count(*) as ""Nb""from sec_pos_firm spf where spf.sec_pos_key_db_id in ( select spk.sec_pos_key_db_id from SEC_POS_KEY spk where spk.sec_pos_key_db_id in ( select ic2.sec_pos_key_db_id from inx i2, INX_client_info ic2 where ic2.inx_db_id = i2.inx_db_id and i2.branch_db_id = <BRANCH> group by ic2.sec_pos_key_db_id)) UNION select '                                   **********',14 as ""Tri"",null,null,null from DUAL UNIONselect 'Credit Lines' as ""WHAT ?"", 15 as ""Tri"",       cl.credit_line_type as ""Type"",       null as ""Status"",       count(*) as ""Nb""from credit_line clwhere cl.branch_db_id = <BRANCH>group by cl.credit_line_typeorder by ""Tri"");", ,,export PATH=/apps/oracle/current/bin:$PATH,,,,,,
NOW => ,20170325,16H02,,,,,,,,,,,,,,RESULT of COB Test Pack,testpack_COB,"-- [ ***** COB timing ***** ]select to_char(R_Time_Biznes_end, 'DD/MM/YYYY HH24:MI:SS') as When_Biznes_ENDS,       decode(sign(nvl(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                             2),                       0) - 2),              1,              html_font(1,                        to_char(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                            2)),                        'B-red'),              to_char(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                                      2))) as ""Nb_minutes"",       Sched_Tasktype,       Sched_What,       Sched_Filetask,       Sched_Comment  from Test_Pack_Result t where t.sched_tasktype != '** RESULT **' and nvl(t.sched_processtype, 'cob') != 'AceTP scheduler'   and nvl(t.sched_processtype, 'cob') != 'Crontab'   and (t.sched_tasktype != '** Standard **' or t.sched_filetask = 'Theorical END of the COB' or t.sched_filetask = 'Beginning of the COB') order by r_time_biznes_end;-- [SCHEDULES]select st.sch_type_ID,st.description, s.sch_id, s.sch_db_id, s.processing_statusfrom SCH s, SCH_TYPE stwhere s.entl_establish_date = to_date('21/04/2006','DD/MM/YYYY') and s.branch_db_id = <BRANCH> and st.sch_type_db_id= s.sch_type_db_id;select cm.direction, cm.bp_role_type, cm.device, cm.msg_type, cm.status_type, count(*)from CB_MSG cmwhere cm.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and cm.direction = 'OUT'group by cm.direction, cm.bp_role_type, cm.device, cm.msg_type, cm.status_type;-- [COB => Establish Entitlements]select st.sch_type_ID,st.description, s.processing_status, count(*) as ""Nb""from sch s, sch_type stwhere s.entl_establish_date = to_date('21/04/2006','DD/MM/YYYY')and s.processing_status ='ENTEST' -- or TRXGENand s.branch_db_id = <BRANCH>and st.sch_type_db_id= s.sch_type_db_idgroup by st.sch_type_ID,st.description, s.processing_status;select entl_establish_date,processing_status, count(*) from sch swhere s.entl_establish_date = to_date('21/04/2006','DD/MM/YYYY')and s.processing_status ='ENTEST' -- or TRXGENgroup by entl_establish_date,processing_status;select s.mandatory_voluntary_ind, s.category as ""Cat"", count(*) as ""Nb""from sch_entl_pos sep, sch swhere s.branch_db_id=<BRANCH> and sep.sch_db_id=s.sch_db_idgroup by s.mandatory_voluntary_ind, s.category;select s.mandatory_voluntary_ind, s.category as ""Cat"", sei.securities_way, count(*) as ""Nb""from sch_entl_inx sei, sch s where s.branch_db_id=<BRANCH> and sei.sch_db_id=s.sch_db_idgroup by s.mandatory_voluntary_ind, s.category, sei.securities_way;-- [COB => Send Daily TBR File]select t.code, count(*) from record twhere t.class_name like '%ebr.out.techrepair%' and t.business_date = to_date('21/04/2006','DD/MM/YYYY') group by t.code;-- [COB => Send MT 566 for unconfirmed sett for grouped movements]select 'Nb of mvts', count(*) from cy_mvt tinner join cy_trx ct on ct.cy_trx_db_id = t.cy_trx_db_idinner join sch s on s.sch_db_id = ct.sch_db_idwhere t.status = 'SETT' and t.ca_confirmation_history_db_id is nulland t.expected_sett_date_time = to_date('21/04/2006','DD/MM/YYYY') and s.branch_db_id = <BRANCH>;select account_id, device, count(*) from cb_msgwhere msg_type = '566'and creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by account_id, device;-- [COB => Send Daily +Monthly Biling file]select r.code, count(*) from record rwhere r.class_name like '%EBROutParsedSettTrxRecord'and r.business_date=to_date('21/04/2006','DD/MM/YYYY') group by r.code;-- [COB => Generate Statement of holdings]select 'Generate Statement of holdings', count(*) as ""Nb""from cb_msg c where c.msg_type = '535'and c.device = 'SWIFT'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Generate Statement of holdings to PBLink]select account_id, count(*) from cb_msg c where c.msg_type = '535'and c.device = 'PBLink'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by account_id;-- [COB => Generate Notice of Events/Generate reminders]select 'Generate Notice of Events/Generate reminders', count(*) as ""Nb"" from cb_msg c where c.msg_type = '564'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Generate Statement of settled transaction]select 'Generate Statement of settled transaction', count(*) as ""Nb""from cb_msg c where c.msg_type = '536'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Create and Send Credit Line Usage to BEACON]select p.expected_records, p.processed_records, p.rejected_recordsfrom process_log p where process_name = 'JATPIT_SndCLUsg' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Overnight Client Position report (JATPIT_EODPosRp)]select p.expected_records, p.processed_records, p.rejected_recordsfrom process_log p where process_name = 'JATPIT_EODPosRp' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Receive and Update Customers from MIDAS]select * from client c where c.client_id='200097';select * from imported_customer ic where ic.customer_id='201244';-- [COB => Change of Actual Settlement Date]select b.code, c.logical_business_day, i.mp_asd, i.mp_status, s.sc_id, count(i.mp_asd)from inx i, branch b, calendar c, sc swhere i.mp_status not in ('SETT', 'CAND', 'REJT', 'RECO')and b.branch_db_id = i.branch_db_idand c.calendar_db_id = b.calendar_db_idand s.sc_db_id = i.m_sc_db_id_scand i.branch_db_id = <BRANCH>group by b.code, c.logical_business_day, i.mp_asd, i.mp_status, s.sc_id;-- [COB => Generate Statement of pending transaction]select p.expected_records, p.processed_records, p.rejected_recordsfrom process_log p where process_name = 'JATPIT_PStmSw' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');select account_id, count(*) from cb_msg c where c.msg_type = '537'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by account_id;-- [COB => Receive ABS Final Investor detailselect t.type, t.fiscal_country, count(*) as ""Nb"" from fnl_invstr t group by t.type, t.fiscal_country;-- [COB => Receive ABS Final Investor Reference]select 'ABS Final Investor Reference', count(*) as ""Nb"" from fnl_invstr_reference;-- [COB => Receive ABS Final Investor GP]select 'ABS Final Investor GP', count(*) as ""Nb"" from fnl_invstr_individual;-- [COB => Receive and Update Cash Accounts from MIDAS]select t.ca_status, t.midas_collateral_acc, t.ca_ccy, count(*) as ""Nb""from int_cash_acc tgroup by t.ca_status, t.midas_collateral_acc, t.ca_ccy;-- [COB => Receive and Update Credit Lines from BEACON]select * from credit_line cl where (cl.creation_date >= to_date('<TODAY>','DD/MM/YYYY') or cl.updating_date >= to_date('<TODAY>','DD/MM/YYYY'));-- [COB => Receive and Update Opening Balances from MIDAS]select b.code, count(*) from open_balance_cash_pos obinner join int_cash_acc ca on ca.int_cash_acc_db_id = ob.int_cash_acc_db_idinner join client cl on cl.client_db_id = ca.client_db_idinner join entity e on e.entity_db_id = cl.entity_db_idinner join branch b on b.branch_db_id = e.branch_db_idinner join calendar c on c.calendar_db_id = b.calendar_db_idwhere ob.pos_date = c.logical_business_daygroup by b.code;-- [COB => Initialize Reserved Amount]select b.code, count(*)from risk_ctrl rs inner join branch b on b.branch_db_id = rs.branch_db_id inner join calendar c on c.calendar_db_id = b.calendar_db_id where rs.risk_ctrl_date = c.logical_business_day group by b.code;-- [COB => Re-activate suspended clients and accounts]select at.actual_biz_class_name,count(*)from audit_trail atinner join audit_trail_msg am on am.audit_trail_db_id = at.audit_trail_db_idwhere at.actual_biz_class_name in ('CLIENT','SFK_ACC')and at.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by at.actual_biz_class_name;-- [COB => Generate Corporate Action Transactions]select ct.branch_db_id, ct.sch_db_id, count(ct.cy_trx_db_id) from cy_trx ctinner join sch on sch.sch_db_id = ct.sch_db_idinner join process_log p on p.process_name = 'JATPIT_GenCATrx' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY')where ct.creation_date between p.start_datetime and p.end_datetimegroup by ct.branch_db_id, ct.sch_db_id;-- [COB => Settlement of CY transactions/Generate Client confirmations]select * from cb_msg cb join process_log p on p.process_name= 'JATPDE_SettCYMv' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY')where cb.msg_type = '566' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');-- [ ***** END OF THE TEST PASK RESULTS ***** ]", ,With \,export PATH=/apps/oracle/current/bin:\$PATH,,,,,,
Directory (script) => ,/apps/tibco/acetppf1/exploit/scripts/,,,Directory (logs) => ,/apps/tibco/acetppf1/TestPack/logs/,,Dir (phalanger) => ,/apps/phalanger/data/,,Dir (history) => ,/apps/tibco/acetppf1/TestPack/./,,,,,RESULT Table Footprint,testpack_Table_Footprint,"-- [TABLE FOOT PRINT]select t.my_when as ""When"",       t.my_object as ""Branch"",       t.my_table_name as ""Table"",       decode(t.my_inserts,0,null,t.my_inserts) as ""Nb Inserts"",       decode(t.my_updates,0,null,t.my_updates) as ""Nb Updates"",       decode(t.my_deletes,0,null,t.my_deletes) as ""Nb Deletes"",       decode(t.my_select_full,0,null,t.my_select_full) as ""Nb Select FULL"",       decode(t.my_select_by_index_rowid,0,null,t.my_select_by_index_rowid) as ""Nb SelectByIndexRowid""from   Test_Pack_Footprint torder by t.my_table_name;", ,,,,,,,,
Directory (dataref) => ,/apps/tibco/acetppf1/dataref/,,,Directory (bin) => ,/apps/tibco/acetppf1/TestPack/bin/,,Directory (ROOT) =>,/apps/tibco/acetppf1/TestPack/,,,,,,,,,,, ,,,,,,,,
/CURRENT (do not touch),,,,,,,,,,,,,,,,,,, ,,,,,,,,
MIL,MILAN,pf1,ITMM,atpeur90.fr.net.intra,titss210,titss202,titss314,titss404,409,data,TestPack,bin,logs,.,,RESULT of Test Pack,testpack_MIL,"-- [OVERALL feeling on the Test Pack]select decode( (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and (t.T1_Volume_Status='ERROR' or t.T1_Duration_Status='ERROR')),               0, decode(  (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK'),                             0, html_font(1,'This TestPack had no flow in OK... !?','B-blue'),                             html_font(1,'This TestPack when quite WELL','B-green')                          ),               1, 'This TestPack got 1 ' || html_font(1,'ERROR','B-red'),               2, 'This TestPack got 2 ' || html_font(1,'ERRORS','B-red'),               3, 'This TestPack got 3 ' || html_font(1,'ERRORS','B-red'),               html_font(1,'This TestPack got several ERRORS','B-red')             ) as ""Global Result"",       null as ""Summary""from DUALUNIONselect null as ""Global Result"",       to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK'))            || html_font(1,' flows are OK','B-green') as ""Summary""from DUALUNIONselect null as ""Global Result"",       to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='ERROR'))            || html_font(            decode((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='ERROR'),0,0,1)            ,' flows are in ERROR','B-red') || ' regarding Volumes' as ""Summary""from DUALUNIONselect null as ""Global Result"",       to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Duration_Status='ERROR'))            || html_font(            decode((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Duration_Status='ERROR'),0,0,1)            ,' flows are in ERROR','B-red') || ' regarding Performances' as ""Summary""from DUAL;-- [DASHBOARD OF THE FLOWS]select       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.sched_processtype,'N-blue'),t.sched_processtype) as ""ProcessType"",       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.Sched_TaskType,'N-blue'),decode(t.T1_Volume_Status,'OK',t.Sched_TaskType,html_font(1,t.Sched_TaskType,'B-red'))) as ""TaskType"",       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.sched_what,'N-blue'),t.sched_what) as ""What"",       t.sched_filetask as ""File"",       decode(nvl(t.r_nbrec_still,0),0,null,html_font(1,to_char(t.r_nbrec_still),'B-red')) as ""Still"",       t.r_nbrec_processed as ""PRO"",       decode(nvl(t.r_nbrec_pending,0),0,null,html_font(1,to_char(t.r_nbrec_pending),'B-red')) as ""PEN"",       t.r_real_time as ""Msg per sec"",--       round(t.r_elapse_time/60,1) as ""Elapse minutes"",       lpad(to_char(trunc(t.r_elapse_time/60)),2,'_')||':'||lpad(to_char(round(mod(t.r_elapse_time,60),2)),2,'0') as ""Elapse minutes"",       to_char(t.r_time_tibco_begin,'HH24:MI:SS') as ""Tibco begin"",       to_char(t.r_time_biznes_begin,'HH24:MI:SS') as ""Biz..."",       to_char(t.r_time_biznes_end,'HH24:MI:SS') as ""...ness"",       t.T1_Volume_Expected as ""TARGET NbRec"",       t.T1_Volume as ""OBTAINED NbRec"",       decode(t.T1_Volume_Status,'OK',html_font(1,'OK','B-green'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Volume_Status) as ""Status Biz"",       t.T1_Duration_Expected as ""TARGET per sec"",       t.T1_Duration as ""OBTAINED per sec"",       decode(t.T1_Duration_Status,'OK',html_font(1,'OK','B-green'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Duration_Status) as ""Status Perf"",       html_font(1,t.T1_Comment,'N-red') as ""Comment""from Test_Pack_Result t where t.sched_processtype is not null and trunc( t.r_time_tibco_begin ) >= to_date('<TODAY>','DD/MM/YYYY')order by t.R_Time_Biznes_end desc;-- [ ***** COB timing ***** ]select to_char(R_Time_Biznes_end, 'DD/MM/YYYY HH24:MI:SS') as When_Biznes_ENDS,      decode(Sched_Filetask,'beginning of the COB','',       decode(sign(nvl(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                             2),                       0) - 2),              1,              html_font(1,                        to_char(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                            2)),                        'B-red'),              to_char(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                                      2)))      ) as ""Nb_minutes"",       Sched_Tasktype,       Sched_What,       Sched_Filetask,       Sched_Comment  from Test_Pack_Result t where t.sched_tasktype != '** RESULT **' and nvl(t.sched_processtype, 'cob') != 'AceTP scheduler'   and nvl(t.sched_processtype, 'cob') != 'Crontab'   and (t.sched_tasktype != '** Standard **' or t.sched_filetask = 'Theorical END of the COB' or t.sched_filetask = 'Beginning of the COB') order by r_time_biznes_end;", ,,,,,,,,
FKT,FRANKFURT,pf4,DEFF,atpeur70.fr.net.intra,titss314,titss210,"titss315,titss316",titss404,1,data4,TestPack,bin,logs,.,,RESULT of Clearing Test Pack,testpack_MIL_Clearing,"-- [OVERALL feeling on the Test Pack]select decode( (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and (t.T1_Volume_Status='ERROR' or t.T1_Duration_Status='ERROR')),               0, decode(  (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK'),                             0, html_font(1,'This TestPack had no flow in OK... !?','B-blue'),                             html_font(1,'This TestPack when quite WELL','B-green')                          ),               1, 'This TestPack got 1 ' || html_font(1,'ERROR','B-red'),               2, 'This TestPack got 2 ' || html_font(1,'ERRORS','B-red'),               3, 'This TestPack got 3 ' || html_font(1,'ERRORS','B-red'),               html_font(1,'This TestPack got several ERRORS','B-red')             ) as ""Global Result"",       null as ""Summary""from DUALUNIONselect null as ""Global Result"",       html_font(1,to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK')),'B-black')            || html_font(1,' flows are OK','B-green') as ""Summary""from DUALUNIONselect null as ""Global Result"",       html_font(1,to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='ERROR')),'B-black')            || html_font(1,' flows are in ERROR','B-red') || ' regarding Volumes' as ""Summary""from DUALUNIONselect null as ""Global Result"",       html_font(1,to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Duration_Status='ERROR')),'B-black')            || html_font(1,' flows are in ERROR','B-red') || ' regarding Performances' as ""Summary""from DUAL;-- [DASHBOARD OF THE FLOWS]select       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.sched_processtype,'N-blue'),t.sched_processtype) as ""ProcessType"",       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.Sched_TaskType,'N-blue'),decode(t.T1_Volume_Status,'OK',t.Sched_TaskType,html_font(1,t.Sched_TaskType,'B-red'))) as ""TaskType"",       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.sched_what,'N-blue'),t.sched_what) as ""What"",       t.sched_filetask as ""File"",       decode(nvl(t.r_nbrec_still,0),0,null,html_font(1,to_char(t.r_nbrec_still),'B-red')) as ""Still"",       t.r_nbrec_processed as ""PRO"",       decode(nvl(t.r_nbrec_pending,0),0,null,html_font(1,to_char(t.r_nbrec_pending),'B-red')) as ""PEN"",       t.r_real_time as ""Msg per sec"",--       round(t.r_elapse_time/60,1) as ""Elapse minutes"",       lpad(to_char(trunc(t.r_elapse_time/60)),2,'_')||':'||lpad(to_char(round(mod(t.r_elapse_time,60),2)),2,'0') as ""Elapse minutes"",       to_char(t.r_time_tibco_begin,'HH24:MI:SS') as ""Tibco begin"",       to_char(t.r_time_biznes_begin,'HH24:MI:SS') as ""Biz..."",       to_char(t.r_time_biznes_end,'HH24:MI:SS') as ""...ness"",       t.T1_Volume_Expected as ""TARGET NbRec"",       t.T1_Volume as ""OBTAINED NbRec"",       decode(t.T1_Volume_Status,'OK',html_font(1,'OK','B-green'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Volume_Status) as ""Status Biz"",       t.T1_Duration_Expected as ""TARGET per sec"",       t.T1_Duration as ""OBTAINED per sec"",       decode(t.T1_Duration_Status,'OK',html_font(1,'OK','B-green'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Duration_Status) as ""Status Perf"",       html_font(1,t.T1_Comment,'N-red') as ""Comment""from Test_Pack_Result t where t.sched_processtype is not null and trunc( t.r_time_tibco_begin ) >= to_date('<TODAY>','DD/MM/YYYY')order by t.R_Time_Biznes_end desc;-- [Control Board : ALL FLOWS]select -- flows with direction = IN       decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type) as ""FileType"",        round(sum(decode(t.status_type,'PRO',1,0)) / ( (max (t.updating_date) - min(t.creation_date))*24*60*60 ), 2) as ""RealTime"",       round(f.expected_msg / ( (max (t.updating_date) - min(t.creation_date))*24*60*60 ), 2) as ""Msg/sec"",       '<'||lpad(to_char(trunc((max (t.updating_date) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 12), 'YYMMDDHH24MI'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max (t.updating_date) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as ""ELAPSE(min,sec)"",       f.expected_msg as ""Expected_Msg"", (f.expected_msg - count(*)) as ""Still..."",       sum(decode(t.status_type,'PRO',1,0)) as PRO,       decode(sum(decode(t.status_type,'PEN',1,0)),0,null,html_font(1,to_char(sum(decode(t.status_type,'PEN',1,0))),'B-red')) as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(min(t.creation_date),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        '<'||lpad(to_char(trunc((max(t.updating_date) - min(t.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(t.updating_date) - min(t.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""   ->"",       TO_CHAR(max(t.updating_date),'HH24:MI:SS') AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-error') as ""Error Desc""from cb_file f, cb_msg t, cb_file_type cftwhere t.cb_file_db_id = f.cb_file_db_idand f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'IN'group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_nameUNIONselect -- flows with direction = OUT       decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type) as ""FileType"",        decode(max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date),0,0,round(sum(decode(t.status_type,'SENT',1,0)) / ( (max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60 ), 2)) as ""RealTime"",       decode(max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date),0,0,round(f.expected_msg / ( (max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60 ), 2)) as ""Msg/sec"",       '<'||lpad(to_char(trunc((max (nvl(t.updating_date,t.creation_date)) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 12), 'YYMMDDHH24MI'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max (nvl(t.updating_date,t.creation_date)) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as ""ELAPSE(min,sec)"",       count(*) as ""Expected_Msg"", 0 as ""Still..."",       sum(decode(t.status_type,'SENT',1,0)) as PRO,       decode(sum(decode(t.status_type,'SENT',0,1)),0,null,html_font(1,to_char(sum(decode(t.status_type,'SENT',0,1))),'B-red')) as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  ,INSTR(f.file_name, '_', -1, 1)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  ,INSTR(f.file_name, '_', -1, 1)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(min(t.creation_date),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        '<'||lpad(to_char(trunc((max(nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""   ->"",       TO_CHAR(max(nvl(t.updating_date,t.creation_date)),'HH24:MI:SS') AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-error') as ""Error Desc""from cb_file f, cb_msg t, cb_file_type cftwhere t.cb_file_db_id = f.cb_file_db_idand f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'OUT'group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_name-- having NVL((max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60,0) != 0UNIONselect -- flows with direction = IN, and NO records in CB_MSG table       html_font(1,decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type),'B-red') as ""FileType"",        null as ""RealTime"",       null as ""Msg/sec"",       null as ""ELAPSE(min,sec)"",       f.expected_msg as ""Expected_Msg"", null as ""Still..."",       null as PRO,       null as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(nvl(f.updating_date,f.creation_date)) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(nvl(f.updating_date,f.creation_date)) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(max(nvl(f.updating_date,f.creation_date)),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        null as ""   ->"",       null AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-error') as ""Error Desc""from cb_file f, cb_file_type cftwhere f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'IN'and not exists(select 1 from CB_MSG msg where msg.cb_file_db_id=f.cb_file_db_id)group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_nameUNIONselect -- TASKS from AceTP's Scheduler       html_font(1,sd.label1,'N-'||decode(sd.code,'BRECO','blue','CLSM','fuchsia','black')) as ""FileType"",       null as ""RealTime"",       null as ""Msg/sec"",       null as ""ELAPSE(min,sec)"",       null as ""Expected_Msg"",   -- we should get this info from the TestPack parameters       null as ""Still..."",       null as PRO,       null as PEN,       to_char(qjh.start_time,'DD/MM/YYYY HH24:MI:SS') as ""BEGIN..."",       null as "" ->"",--       null as ""...tibco"",       decode(qjh.stop_time,null,'','<'||lpad(to_char(to_number(substr((qjh.stop_time - qjh.start_time),15,2))+60*to_number(substr((qjh.stop_time - qjh.start_time),12,2))),2,'_')||substr((qjh.stop_time - qjh.start_time),17,3)||'>') as ""   ->"",       decode(qjh.stop_time,null,'',substr(to_char(qjh.stop_time,'DD/MM/YYYY HH24:MI:SS'),12,8)) AS ""...END"",       null as ""WHAT ?"", t.description NAME, qjh.job_history_id,       html_font(1,cast(qjh.ERROR_MESSAGE as varchar2(3500)),'B-error') as ""Error Desc""from qrtz_job_history qjh, task t, static_data sdwhere qjh.job_name = t.job_name and t.ACTIVE = 1 and t.description like 'Test Pack%' and t.branch_db_id = <BRANCH> and t.task_deleted=0and sd.type_name='TASK_TYPE' and sd.code=t.task_typeand qjh.start_time >= to_date('<TODAY>','DD/MM/YYYY')order by ""BEGIN..."" desc, ""FileType"" ;-- [Control Board : status of CB_FILEs]select CB_FILE_DB_ID as ""FileId"", FILE_NAME as ""FileName"", STATUS_TYPE as ""Status"", FILE_SIZE as ""FileSize"", DIRECTION as ""In-Out"",        ACCOUNT_ID as ""AccountId"", BP_ROLE_ID as ""BP_role"", BP_ROLE_TYPE as ""SC-SE"", EXPECTED_MSG as ""Expected MSG"", Creation_date, Updating_date,       html_font(1,CAST(cf.ERROR_OBJ AS VARCHAR2(3500)),'B-error') as ""Error Desc""from CB_FILE cf where cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [List of EXECs uploaded TODAY, per TAAC, INSOURCING_CODE, STATUS]select e.status, t.acc_nbr, e.insource_code, e.market_activity_db_id, e.sfk_acc_db_id, min(e.creation_date), max(e.updating_date), count(*) from EXEC e, TAAC twhere e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') -- and e.exec_db_id >= 1244159and t.taac_db_id = e.taac_db_idgroup by e.status, e.market_activity_db_id, t.acc_nbr, e.insource_code, e.sfk_acc_db_id ;-- [CHECK how many MAKT inx have been CREATED from MarketExecs]select e.insource_code,       i.mp_status,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       min(i.creation_date) as ""First INX started..."",       max(i.creation_date) as ""Last INX started..."",       max(i.updating_date) as ""LAST INX CREATED"",       count(distinct e.exec_db_id) as ""Nb exec"",       count(distinct i.inx_db_id) as ""Nb inx""from inx i, exec e where i.branch_db_id = <BRANCH> and e.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX' and i.type = 'MAKT'and e.inx_db_id=i.inx_db_id (+)-- and e.insource_code = 'DRKW'group by e.insource_code, i.mp_status;select e.insource_code, cm.cb_file_db_id,       max(e.creation_date) as ""Last EXEC created..."",       min(i.creation_date) as ""First INX started..."",       max(i.creation_date) as ""Last INX CREATED"",       count(distinct e.exec_db_id) as ""Nb exec"",       count(distinct i.inx_db_id) as ""Nb inx"",       '<'||lpad(to_char(trunc((max(i.creation_date) - max(e.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(i.creation_date) - max(e.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""ElapseTime (min:sec)""from inx i, exec e, exec_msg em, cb_msg cm where i.branch_db_id = <BRANCH> and e.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX' and i.type = 'MAKT'and em.exec_db_id (+)= e.exec_db_id and cm.biz_tracking_id (+)= em.exec_msgand e.inx_db_id = i.inx_db_id (+)-- and e.insource_code = 'DRKW'group by e.insource_code, cm.cb_file_db_id;-- [**********]select e.insource_code,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       count(distinct e.exec_db_id) as ""Nb exec NOT LINKED to any inx""from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX'and e.inx_db_id is nullgroup by e.insource_code ;select e.insource_code,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       count(distinct e.exec_db_id) as ""Nb exec LINKED to an inx""from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX'and e.inx_db_id is not nullgroup by e.insource_code ;-- [**********]select e.insource_code,       sum(decode(e.reconciliation_ind,'REOK',1,0)) as REOK,       sum(decode(e.reconciliation_ind,'REKO',1,0)) as REKO,       sum(decode(e.reconciliation_ind,'BLNK',1,0)) as BLNK,       count(*)from EXEC ewhere e.trade_date=to_date('20/04/2006','DD/MM/YYYY') and e.branch_db_id = <BRANCH>and e.status='COMP'group by e.insource_code;-- [**********]select e.insource_code,       count(distinct t.exec_db_id)from EXEC e,     reco_exec_details twhere e.trade_date=to_date('20/04/2006','DD/MM/YYYY') and e.branch_db_id = <BRANCH>and e.status='COMP'and t.exec_db_id=e.exec_db_idgroup by e.insource_code;-- [**********]select e.trade_date, r.rule_name, re.rule_db_id, min(re.creation_date) as Time, e.insource_code,       sum(decode(t.trade_type,'CLEX',1,0)) as CLEX,       sum(decode(t.trade_type,'MAEX',1,0)) as MAEX,       sum(decode(t.trade_type,'NETX',1,0)) as NETX,       count(*)from EXEC e,     reco_exec_details t,     reco_exec re,     rule rwhere e.trade_date in (to_date('20/04/2006','DD/MM/YYYY'),to_date('24/04/2006','DD/MM/YYYY')) and e.branch_db_id = <BRANCH>and e.status='COMP'and t.exec_db_id=e.exec_db_idand re.reco_exec_db_id=t.reco_exec_db_idand r.rule_db_id = re.rule_db_idgroup by e.trade_date, r.rule_name, re.rule_db_id, e.insource_code;-- [**********]select e.insource_code, e.trade_type,        max(nvl(e.updating_date,e.creation_date)) as ""When... ?"",       count(*)from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by e.insource_code, e.trade_type ;-- [CHECK how many INX have been CREATED today]select inx.type, inx.m_agent_location, inx.mp_status,       min(creation_date) as ""First INX started..."",       max(creation_date) as ""Last INX started..."",       max(updating_date) as ""LAST INX CREATED"",       count(*)from INX where inx.branch_db_id = <BRANCH> and inx.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by inx.type, inx.m_agent_location, inx.mp_status ;-- [CHECK how many INX have been CREATED or MODIFIED today]select inx.type, inx.m_agent_location, inx.mp_status,       min(creation_date) as ""First INX started..."",       max(creation_date) as ""Last INX started..."",       max(updating_date) as ""LAST INX CREATED"",       count(*)from INX where inx.branch_db_id = <BRANCH> and nvl(inx.updating_date,inx.creation_date) >= to_date('<TODAY>','DD/MM/YYYY')group by inx.type, inx.m_agent_location, inx.mp_status ;-- [CHECK impact of uploaded FILES on INSTRUCTIONS]select cf.file_name as ""File"",        0 as ""Sort"", 'Total number of messages in file (file_db_id='||cm.cb_file_db_id||')' as ""Volumes"", count(*) as ""Total_NB"", null as ""Details""from cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by cf.file_name, cm.cb_file_db_idUNIONselect cf.file_name as ""File"",        3 as ""Sort"", 'TOTAL nb inx impacted' as ""Volumes"", count(distinct i.inx_db_id) as ""Total_NB"", null as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_nameUNIONselect cf.file_name as ""File"",        1 as ""Sort"", 'Nb MSG (from CB_MSG) still pending' as ""Volumes"", count(*) as ""Total_NB"", null as ""Details""from cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cm.status_type = 'PEN'group by cf.file_nameUNIONselect cf.file_name as ""File"",        2 as ""Sort"", 'Nb MSG processed, but for which we did NOT impact any inx' as ""Volumes"", count(*) as ""Total_NB"", null as ""Details""from cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cm.status_type = 'PRO'and (cm.biz_tracking_id is null or not exists(select 1 from inx_sc_msg biz2 where biz2.sc_msg=cm.biz_tracking_id))group by cf.file_nameUNIONselect cf.file_name as ""File"",        4 as ""Sort"", '      => '||i.mp_status as ""Volumes"", null as ""Total_NB"", count(distinct i.inx_db_id) as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_name, i.mp_statusUNIONselect cf.file_name as ""File"",        5 as ""Sort"", 'TOTAL nb inx impacted (per AgLoc / Status)' as ""Volumes"", count(distinct i.inx_db_id) as ""Total_NB"", null as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_nameUNIONselect cf.file_name as ""File"",        6 as ""Sort"", '      => '||i.m_agent_location||' / '||i.mp_status as ""Volumes"", null as ""Total_NB"", count(distinct i.inx_db_id) as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_name, i.m_agent_location, i.mp_statusUNIONselect cf.file_name as ""File"",        7 as ""Sort"", '          ************************************************************' as ""Volumes"", null as ""Total_NB"", null as ""Details""from cb_file cf, cb_file_type cftwhere 1=1--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by cf.file_nameorder by ""File"", ""Sort"";-- [CHECK how many INX were simulated]select trunc(atm.date_time), atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after, count(*)from INX i, AUDIT_TRAIL at, AUDIT_TRAIL_MSG atmwhere at.object_db_id = i.inx_db_idand i.branch_db_id = <BRANCH>and atm.process_name = 'Clearing.INX_SIMULATION'and atm.audit_trail_db_id = at.audit_trail_db_idand atm.date_time >= to_date('<TODAY>','DD/MM/YYYY')group by trunc(atm.date_time), atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after;-- [List of EXECs uploaded TODAY, via TAF or SWIFT]select e.client_device, e.status, t.acc_nbr, e.insource_code, e.market_activity_db_id, e.sfk_acc_db_id, min(e.creation_date), max(e.updating_date), count(*) from EXEC e, TAAC twhere e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') -- and e.exec_db_id >= 1244159and t.taac_db_id = e.taac_db_id and e.trade_type = 'CLEX'group by e.client_device, e.status, e.market_activity_db_id, t.acc_nbr, e.insource_code, e.sfk_acc_db_id ;-- [CHECK how many INX have been CREATED today]select i.creation_media,i.mp_status, count(*), max(i.creation_date)from INX i where i.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and i.creation_media = 'SWIFT'group by i.creation_media, i.mp_status ;select i.creation_media, count(*), max(i.creation_date)from INX i where i.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and i.creation_media = 'SWIFT'group by i.creation_media ;-- [CHECK that the Task Scheduler has been correctly ""automatically"" SETUP]select * from qrtz_cron_triggers t2 where t2.trigger_name in (select trigger_name from qrtz_triggers where job_name in (select job_name from task where ACTIVE = 1 and description like 'Test Pack%' and branch_db_id = <BRANCH>));-- [ ***** END OF THE TEST PASK RESULTS ***** ]", ,,,,,,,,
LIGHT,'LIGHT',pf1,ITMM,atpeur90.fr.net.intra,titss210,titss202,titss314,titss404,409,data,TestPack,bin,logs,.,,,,, ,,,,,,,,
COB,'COB',pf1,ITMM,atpeur90.fr.net.intra,titss210,titss202,titss314,titss404,409,data,TestPack,bin,logs,.,,RESULT of FKT Test Pack (OLD),testpack_FKT_old,"-- [OVERALL feeling on the Test Pack]select decode( (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and (t.T1_Volume_Status='ERROR' or t.T1_Duration_Status='ERROR')),               0, decode(  (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK'),                             0, html_font(1,'This TestPack had no flow in OK... !?','B-blue'),                             html_font(1,'This TestPack when quite WELL','B+G')                          ),               1, 'This TestPack got 1 ' || html_font(1,'ERROR','B-red'),               2, 'This TestPack got 2 ' || html_font(1,'ERRORS','B-red'),               3, 'This TestPack got 3 ' || html_font(1,'ERRORS','B-red'),               html_font(1,'This TestPack got several ERRORS','B-red')             ) as ""Global Result"",       to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK'))            || ' flows are ' || html_font(1,'OK','B+G')            || ', and '            || to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='ERROR'))            || ' flows are in ' || html_font(1,'ERROR','B-red') || ' regarding Volumes'            || ', and '            || to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Duration_Status='ERROR'))            || ' flows are in ' || html_font(1,'ERROR','B-red') || ' regarding Performances'       as ""Comment""  from DUAL;-- [Dashboard of the flows]select       t.sched_processtype as ""ProcessType"",       decode(nvl(t.r_nbrec_still,0)+nvl(t.r_nbrec_pending,0),0,t.Sched_TaskType,html_font(1,t.Sched_TaskType,'B-red')) as ""TaskType"",       t.sched_what as ""What"",       t.sched_filetask as ""File"",       t.sched_nbrec as ""NbRec_Expected"",       decode(nvl(t.r_nbrec_still,0),0,null,html_font(1,to_char(t.r_nbrec_still),'B-red')) as ""Still"",       t.r_nbrec_processed as ""PRO"",       decode(nvl(t.r_nbrec_pending,0),0,null,html_font(1,to_char(t.r_nbrec_pending),'B-red')) as ""PEN"",       t.r_real_time as ""Msg_per_sec"",       round(t.r_elapse_time/60,1) as ""Elapse_minutes"",       to_char(t.r_time_tibco_begin,'DD/MM/YYYY HH24:MI:SS') as Tibco_begin,       to_char(t.r_time_biznes_begin,'HH24:MI:SS') as ""Biz..."",       to_char(t.r_time_biznes_end,'HH24:MI:SS') as ""...ness"",       decode(t.T1_Volume_Status,'OK',html_font(1,'OK','B+G'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Volume_Status) as ""Status Biz"",       t.T1_Duration_Expected as ""Target_per_sec"",       decode(t.T1_Duration_Status,'OK',html_font(1,'OK','B+G'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Duration_Status) as ""Status Perf"",       T1_Comment as ""Comment""from Test_Pack_Result t where t.sched_processtype is not null and trunc( t.r_time_tibco_begin ) >= to_date('<TODAY>','DD/MM/YYYY')order by t.R_Time_Biznes_end desc;-- [AUDIT TRAIL]select to_char(R_Time_Biznes_end,'DD/MM/YYYY HH24:MI:SS') as When_Biznes_ENDS, Sched_Tasktype, Sched_What, Sched_Filetask, Sched_Comment from Test_Pack_Result where trunc(r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and Sched_TaskType != '** RESULT **'order by r_time_biznes_end;-- [Control Board : status of CB_FILEs]select CB_FILE_DB_ID as ""FileId"", FILE_NAME as ""FileName"", STATUS_TYPE as ""Status"", FILE_SIZE as ""FileSize"", DIRECTION as ""In-Out"",        ACCOUNT_ID as ""AccountId"", BP_ROLE_ID as ""BP_role"", BP_ROLE_TYPE as ""SC-SE"", html_font(1,CAST(cf.ERROR_OBJ AS VARCHAR2(3500)),'B-red') as ""Error Desc"", EXPECTED_MSG as ""Expected MSG"", Creation_date, Updating_datefrom CB_FILE cf where cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [Control Board : ALL FLOWS]select -- flows with direction = IN       decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type) as ""FileType"",        round(sum(decode(t.status_type,'PRO',1,0)) / ( (max (t.updating_date) - min(t.creation_date))*24*60*60 ), 2) as ""RealTime"",       round(f.expected_msg / ( (max (t.updating_date) - min(t.creation_date))*24*60*60 ), 2) as ""Msg/sec"",       '<'||lpad(to_char(trunc((max (t.updating_date) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 12), 'YYMMDDHH24MI'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max (t.updating_date) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as ""ELAPSE(min,sec)"",       f.expected_msg as ""Expected_Msg"", (f.expected_msg - count(*)) as ""Still..."",       sum(decode(t.status_type,'PRO',1,0)) as PRO,       decode(sum(decode(t.status_type,'PEN',1,0)),0,null,html_font(1,to_char(sum(decode(t.status_type,'PEN',1,0))),'B-red')) as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(min(t.creation_date),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        '<'||lpad(to_char(trunc((max(t.updating_date) - min(t.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(t.updating_date) - min(t.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""   ->"",       TO_CHAR(max(t.updating_date),'HH24:MI:SS') AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-red') as ""Error Desc""from cb_file f, cb_msg t, cb_file_type cftwhere t.cb_file_db_id = f.cb_file_db_idand f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'IN'group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_nameUNIONselect -- flows with direction = OUT       decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type) as ""FileType"",        decode(max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date),0,0,round(sum(decode(t.status_type,'SENT',1,0)) / ( (max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60 ), 2)) as ""RealTime"",       decode(max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date),0,0,round(f.expected_msg / ( (max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60 ), 2)) as ""Msg/sec"",       '<'||lpad(to_char(trunc((max (nvl(t.updating_date,t.creation_date)) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 12), 'YYMMDDHH24MI'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max (nvl(t.updating_date,t.creation_date)) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as ""ELAPSE(min,sec)"",       count(*) as ""Expected_Msg"", 0 as ""Still..."",       sum(decode(t.status_type,'SENT',1,0)) as PRO,       decode(sum(decode(t.status_type,'SENT',0,1)),0,null,html_font(1,to_char(sum(decode(t.status_type,'SENT',0,1))),'B-red')) as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  ,INSTR(f.file_name, '_', -1, 1)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  ,INSTR(f.file_name, '_', -1, 1)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(min(t.creation_date),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        '<'||lpad(to_char(trunc((max(nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""   ->"",       TO_CHAR(max(nvl(t.updating_date,t.creation_date)),'HH24:MI:SS') AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-red') as ""Error Desc""from cb_file f, cb_msg t, cb_file_type cftwhere t.cb_file_db_id = f.cb_file_db_idand f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'OUT'group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_name-- having NVL((max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60,0) != 0UNIONselect -- flows with direction = IN, and NO records in CB_MSG table       html_font(1,decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type),'B-red') as ""FileType"",        null as ""RealTime"",       null as ""Msg/sec"",       null as ""ELAPSE(min,sec)"",       f.expected_msg as ""Expected_Msg"", null as ""Still..."",       null as PRO,       null as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(nvl(f.updating_date,f.creation_date)) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(nvl(f.updating_date,f.creation_date)) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(max(nvl(f.updating_date,f.creation_date)),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        null as ""   ->"",       null AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-red') as ""Error Desc""from cb_file f, cb_file_type cftwhere f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'IN'and not exists(select 1 from CB_MSG msg where msg.cb_file_db_id=f.cb_file_db_id)group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_nameUNIONselect -- TASKS from AceTP's Scheduler       html_font(1,sd.label1,'N-'||decode(sd.code,'BRECO','blue','CLSM','fuchsia','black')) as ""FileType"",       null as ""RealTime"",       null as ""Msg/sec"",       null as ""ELAPSE(min,sec)"",       null as ""Expected_Msg"",   -- we should get this info from the TestPack parameters       null as ""Still..."",       null as PRO,       null as PEN,       to_char(qjh.start_time,'DD/MM/YYYY_HH24:MI:SS') as ""BEGIN..."",       null as "" ->"",--       null as ""...tibco"",       decode(qjh.stop_time,null,'','<'||lpad(to_char(to_number(substr((qjh.stop_time - qjh.start_time),15,2))+60*to_number(substr((qjh.stop_time - qjh.start_time),12,2))),2,'_')||substr((qjh.stop_time - qjh.start_time),17,3)||'>') as ""   ->"",       decode(qjh.stop_time,null,'',substr(to_char(qjh.stop_time,'DD/MM/YYYY HH24:MI:SS'),12,8)) AS ""...END"",       null as ""WHAT ?"", t.description NAME, qjh.job_history_id,       html_font(0,qjh.ERROR_MESSAGE,'B-red') as ""Error Desc""from qrtz_job_history qjh, task t, static_data sdwhere qjh.job_name = t.job_name and t.ACTIVE = 1 and t.description like 'Test Pack%' and t.branch_db_id = <BRANCH> and t.task_deleted=0and sd.type_name='TASK_TYPE' and sd.code=t.task_typeand qjh.start_time >= to_date('<TODAY>','DD/MM/YYYY')order by ""BEGIN..."" desc, ""FileType"" ;-- [List of EXECs uploaded TODAY, per TAAC, INSOURCING_CODE, STATUS]select e.status, t.acc_nbr, e.insource_code, e.market_activity_db_id, e.sfk_acc_db_id, min(e.creation_date), max(e.updating_date), count(*) from EXEC e, TAAC twhere e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') -- and e.exec_db_id >= 1244159and t.taac_db_id = e.taac_db_idgroup by e.status, e.market_activity_db_id, t.acc_nbr, e.insource_code, e.sfk_acc_db_id ;-- [CHECK how many MAKT inx have been CREATED from MarketExecs]select e.insource_code,       i.mp_status,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       min(i.creation_date) as ""First INX started..."",       max(i.creation_date) as ""Last INX started..."",       max(i.updating_date) as ""LAST INX CREATED"",       count(distinct e.exec_db_id) as ""Nb exec"",       count(distinct i.inx_db_id) as ""Nb inx""from inx i, exec e where i.branch_db_id = <BRANCH> and e.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX' and i.type = 'MAKT'and e.inx_db_id=i.inx_db_id (+)-- and e.insource_code = 'DRKW'group by e.insource_code, i.mp_status;select e.insource_code, cm.cb_file_db_id,       max(e.creation_date) as ""Last EXEC created..."",       min(i.creation_date) as ""First INX started..."",       max(i.creation_date) as ""Last INX CREATED"",       count(distinct e.exec_db_id) as ""Nb exec"",       count(distinct i.inx_db_id) as ""Nb inx"",       '<'||lpad(to_char(trunc((max(i.creation_date) - max(e.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(i.creation_date) - max(e.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""ElapseTime (min:sec)""from inx i, exec e, exec_msg em, cb_msg cm where i.branch_db_id = <BRANCH> and e.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX' and i.type = 'MAKT'and em.exec_db_id (+)= e.exec_db_id and cm.biz_tracking_id (+)= em.exec_msgand e.inx_db_id = i.inx_db_id (+)-- and e.insource_code = 'DRKW'group by e.insource_code, cm.cb_file_db_id;-- [**********]select e.insource_code,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       count(distinct e.exec_db_id) as ""Nb exec NOT LINKED to any inx""from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX'and e.inx_db_id is nullgroup by e.insource_code ;select e.insource_code,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       count(distinct e.exec_db_id) as ""Nb exec LINKED to an inx""from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX'and e.inx_db_id is not nullgroup by e.insource_code ;-- [**********]select e.insource_code,       sum(decode(e.reconciliation_ind,'REOK',1,0)) as REOK,       sum(decode(e.reconciliation_ind,'REKO',1,0)) as REKO,       sum(decode(e.reconciliation_ind,'BLNK',1,0)) as BLNK,       count(*)from EXEC ewhere e.trade_date=to_date('20/04/2006','DD/MM/YYYY') and e.branch_db_id = <BRANCH>and e.status='COMP'group by e.insource_code;-- [**********]select e.insource_code,       count(distinct t.exec_db_id)from EXEC e,     reco_exec_details twhere e.trade_date=to_date('20/04/2006','DD/MM/YYYY') and e.branch_db_id = <BRANCH>and e.status='COMP'and t.exec_db_id=e.exec_db_idgroup by e.insource_code;-- [**********]select e.trade_date, r.rule_name, re.rule_db_id, min(re.creation_date) as Time, e.insource_code,       sum(decode(t.trade_type,'CLEX',1,0)) as CLEX,       sum(decode(t.trade_type,'MAEX',1,0)) as MAEX,       sum(decode(t.trade_type,'NETX',1,0)) as NETX,       count(*)from EXEC e,     reco_exec_details t,     reco_exec re,     rule rwhere e.trade_date in (to_date('20/04/2006','DD/MM/YYYY'),to_date('24/04/2006','DD/MM/YYYY')) and e.branch_db_id = <BRANCH>and e.status='COMP'and t.exec_db_id=e.exec_db_idand re.reco_exec_db_id=t.reco_exec_db_idand r.rule_db_id = re.rule_db_idgroup by e.trade_date, r.rule_name, re.rule_db_id, e.insource_code;-- [**********]select e.insource_code, e.trade_type,        max(nvl(e.updating_date,e.creation_date)) as ""When... ?"",       count(*)from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by e.insource_code, e.trade_type ;-- [CHECK how many INX have been CREATED today]select inx.type, inx.m_agent_location, inx.mp_status,       min(creation_date) as ""First INX started..."",       max(creation_date) as ""Last INX started..."",       max(updating_date) as ""LAST INX CREATED"",       count(*)from INX where inx.branch_db_id = <BRANCH> and inx.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by inx.type, inx.m_agent_location, inx.mp_status ;-- [CHECK how many INX have been CREATED or MODIFIED today]select inx.type, inx.m_agent_location, inx.mp_status,       min(creation_date) as ""First INX started..."",       max(creation_date) as ""Last INX started..."",       max(updating_date) as ""LAST INX CREATED"",       count(*)from INX where inx.branch_db_id = <BRANCH> and nvl(inx.updating_date,inx.creation_date) >= to_date('<TODAY>','DD/MM/YYYY')group by inx.type, inx.m_agent_location, inx.mp_status ;-- [CHECK how many INX were simulated]/*select atm.date_time, atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after, count(*)from INX i, AUDIT_TRAIL at, AUDIT_TRAIL_MSG atmwhere at.object_db_id = i.inx_db_idand i.branch_db_id = <BRANCH>and atm.process_name = 'Clearing.INX_SIMULATION'and atm.audit_trail_db_id = at.audit_trail_db_idand atm.date_time >= to_date('<TODAY>','DD/MM/YYYY')group by atm.date_time, atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after;*/select trunc(atm.date_time), atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after, count(*)from INX i, AUDIT_TRAIL at, AUDIT_TRAIL_MSG atmwhere at.object_db_id = i.inx_db_idand i.branch_db_id = <BRANCH>and atm.process_name = 'Clearing.INX_SIMULATION'and atm.audit_trail_db_id = at.audit_trail_db_idand atm.date_time >= to_date('<TODAY>','DD/MM/YYYY')group by trunc(atm.date_time), atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after;-- [List of EXECs uploaded TODAY, via TAF or SWIFT]select e.client_device, e.status, t.acc_nbr, e.insource_code, e.market_activity_db_id, e.sfk_acc_db_id, min(e.creation_date), max(e.updating_date), count(*) from EXEC e, TAAC twhere e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') -- and e.exec_db_id >= 1244159and t.taac_db_id = e.taac_db_id and e.trade_type = 'CLEX'group by e.client_device, e.status, e.market_activity_db_id, t.acc_nbr, e.insource_code, e.sfk_acc_db_id ;-- [CHECK how many INX have been CREATED today]select i.creation_media,i.mp_status, count(*), max(i.creation_date)from INX i where i.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and i.creation_media = 'SWIFT'group by i.creation_media, i.mp_status ;select i.creation_media, count(*), max(i.creation_date)from INX i where i.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and i.creation_media = 'SWIFT'group by i.creation_media ;-- [CHECK that the Task Scheduler has been correctly ""automatically"" SETUP]select * from qrtz_cron_triggers t2 where t2.trigger_name in (select trigger_name from qrtz_triggers where job_name in (select job_name from task where ACTIVE = 1 and description like 'Test Pack%' and branch_db_id = <BRANCH>));-- [AUDIT TRAIL]select to_char(R_Time_Biznes_end,'DD/MM/YYYY HH24:MI:SS') as When_Biznes_ENDS, Sched_Tasktype, Sched_What, Sched_Filetask, Sched_Comment from Test_Pack_Result where trunc(r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and Sched_TaskType != '** RESULT **' order by r_time_biznes_end;-- [SCHEDULES]select s.processing_status, s.sch_db_id from SCH s where s.entl_establish_date = to_date('21/04/2006','DD/MM/YYYY') and s.branch_db_id = <BRANCH>;/*select s.* from SCH s where s.entl_establish_date = '21/04/2006' and s.branch_db_id = <BRANCH>;select t.* from SCH_ENTL_POS t where t.sch_db_id in (select s.sch_db_id from SCH s where s.entl_establish_date = '21/04/2006' and s.branch_db_id = <BRANCH>);select t.* from SCH_ENTL_INX t where t.sch_db_id in (select s.sch_db_id from SCH s where s.entl_establish_date = '21/04/2006' and s.branch_db_id = <BRANCH>);*/select cm.direction, cm.bp_role_type, cm.device, cm.msg_type, cm.status_type, count(*)from CB_MSG cmwhere cm.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and cm.direction = 'OUT'group by cm.direction, cm.bp_role_type, cm.device, cm.msg_type, cm.status_type;-- [ ***** END OF THE TEST PASK RESULTS ***** ]", ,,,,,,,,
,,,,,,,,,,,,,,,,RESULT of FKT Test Pack,testpack_FKT,"-- [OVERALL feeling on the Test Pack]select decode( (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and (t.T1_Volume_Status='ERROR' or t.T1_Duration_Status='ERROR')),               0, decode(  (select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK'),                             0, html_font(1,'This TestPack had no flow in OK... !?','B-blue'),                             html_font(1,'This TestPack when quite WELL','B-green')                          ),               1, 'This TestPack got 1 ' || html_font(1,'ERROR','B-red'),               2, 'This TestPack got 2 ' || html_font(1,'ERRORS','B-red'),               3, 'This TestPack got 3 ' || html_font(1,'ERRORS','B-red'),               html_font(1,'This TestPack got several ERRORS','B-red')             ) as ""Global Result"",       to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='OK'))            || ' flows are ' || html_font(1,'OK','B-green')            || ', and '            || to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Volume_Status='ERROR'))            || ' flows are in ' || html_font(1,'ERROR','B-red') || ' regarding Volumes'            || ', and '            || to_char((select count(*) from Test_Pack_Result t where t.sched_processtype is not null and trunc(t.r_time_biznes_end) >= to_date('<TODAY>','DD/MM/YYYY') and t.T1_Duration_Status='ERROR'))            || ' flows are in ' || html_font(1,'ERROR','B-red') || ' regarding Performances'       as ""Comment""  from DUAL;-- [DASHBOARD OF THE FLOWS]select       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.sched_processtype,'N-blue'),t.sched_processtype) as ""ProcessType"",       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.Sched_TaskType,'N-blue'),decode(t.T1_Volume_Status,'OK',t.Sched_TaskType,html_font(1,t.Sched_TaskType,'B-red'))) as ""TaskType"",       decode(t.sched_processtype,'AceTP scheduler',html_font(1,t.sched_what,'N-blue'),t.sched_what) as ""What"",       t.sched_filetask as ""File"",       decode(nvl(t.r_nbrec_still,0),0,null,html_font(1,to_char(t.r_nbrec_still),'B-red')) as ""Still"",       t.r_nbrec_processed as ""PRO"",       decode(nvl(t.r_nbrec_pending,0),0,null,html_font(1,to_char(t.r_nbrec_pending),'B-red')) as ""PEN"",       t.r_real_time as ""Msg per sec"",--       round(t.r_elapse_time/60,1) as ""Elapse minutes"",       lpad(to_char(trunc(t.r_elapse_time/60)),2,'_')||':'||lpad(to_char(round(mod(t.r_elapse_time,60),2)),2,'0') as ""Elapse minutes"",       to_char(t.r_time_tibco_begin,'HH24:MI:SS') as ""Tibco begin"",       to_char(t.r_time_biznes_begin,'HH24:MI:SS') as ""Biz..."",       to_char(t.r_time_biznes_end,'HH24:MI:SS') as ""...ness"",       t.T1_Volume_Expected as ""TARGET NbRec"",       t.T1_Volume as ""OBTAINED NbRec"",       decode(t.T1_Volume_Status,'OK',html_font(1,'OK','B-green'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Volume_Status) as ""Status Biz"",       t.T1_Duration_Expected as ""TARGET per sec"",       t.T1_Duration as ""OBTAINED per sec"",       decode(t.T1_Duration_Status,'OK',html_font(1,'OK','B-green'),'ERROR',html_font(1,'ERROR','B-red'),t.T1_Duration_Status) as ""Status Perf"",       html_font(1,t.T1_Comment,'N-red') as ""Comment""from Test_Pack_Result t where t.sched_processtype is not null and trunc( t.r_time_tibco_begin ) >= to_date('<TODAY>','DD/MM/YYYY')order by t.R_Time_Biznes_end desc;-- [Control Board : ALL FLOWS]select -- flows with direction = IN       decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type) as ""FileType"",        round(sum(decode(t.status_type,'PRO',1,0)) / ( (max (t.updating_date) - min(t.creation_date))*24*60*60 ), 2) as ""RealTime"",       round(f.expected_msg / ( (max (t.updating_date) - min(t.creation_date))*24*60*60 ), 2) as ""Msg/sec"",       '<'||lpad(to_char(trunc((max (t.updating_date) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 12), 'YYMMDDHH24MI'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max (t.updating_date) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as ""ELAPSE(min,sec)"",       f.expected_msg as ""Expected_Msg"", (f.expected_msg - count(*)) as ""Still..."",       sum(decode(t.status_type,'PRO',1,0)) as PRO,       decode(sum(decode(t.status_type,'PEN',1,0)),0,null,html_font(1,to_char(sum(decode(t.status_type,'PEN',1,0))),'B-red')) as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(min(t.creation_date),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        '<'||lpad(to_char(trunc((max(t.updating_date) - min(t.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(t.updating_date) - min(t.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""   ->"",       TO_CHAR(max(t.updating_date),'HH24:MI:SS') AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-error') as ""Error Desc""from cb_file f, cb_msg t, cb_file_type cftwhere t.cb_file_db_id = f.cb_file_db_idand f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'IN'group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_nameUNIONselect -- flows with direction = OUT       decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type) as ""FileType"",        decode(max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date),0,0,round(sum(decode(t.status_type,'SENT',1,0)) / ( (max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60 ), 2)) as ""RealTime"",       decode(max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date),0,0,round(f.expected_msg / ( (max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60 ), 2)) as ""Msg/sec"",       '<'||lpad(to_char(trunc((max (nvl(t.updating_date,t.creation_date)) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 12), 'YYMMDDHH24MI'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max (nvl(t.updating_date,t.creation_date)) - to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as ""ELAPSE(min,sec)"",       count(*) as ""Expected_Msg"", 0 as ""Still..."",       sum(decode(t.status_type,'SENT',1,0)) as PRO,       decode(sum(decode(t.status_type,'SENT',0,1)),0,null,html_font(1,to_char(sum(decode(t.status_type,'SENT',0,1))),'B-red')) as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  ,INSTR(f.file_name, '_', -1, 1)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(t.creation_date) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 1)+1  ,INSTR(f.file_name, '_', -1, 1)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(min(t.creation_date),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        '<'||lpad(to_char(trunc((max(nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""   ->"",       TO_CHAR(max(nvl(t.updating_date,t.creation_date)),'HH24:MI:SS') AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-error') as ""Error Desc""from cb_file f, cb_msg t, cb_file_type cftwhere t.cb_file_db_id = f.cb_file_db_idand f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'OUT'group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_name-- having NVL((max (nvl(t.updating_date,t.creation_date)) - min(t.creation_date))*24*60*60,0) != 0UNIONselect -- flows with direction = IN, and NO records in CB_MSG table       html_font(1,decode(cft.physical_file_type,'MONTETITOLI_G31G32STATUPDTSETTCONF','G32 sett conf','MONTETITOLI_MARKET_EXECUTION','G56 market exec','MONTETITOLIG50','Sending of G50',cft.physical_file_type),'B-red') as ""FileType"",        null as ""RealTime"",       null as ""Msg/sec"",       null as ""ELAPSE(min,sec)"",       f.expected_msg as ""Expected_Msg"", null as ""Still..."",       null as PRO,       null as PEN,       min(to_char(to_date(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  , 14), 'YYYYMMDDHH24MISS'),'DD/MM/YYYY HH24:MI:SS')) as ""BEGIN..."",       '<'||lpad(to_char(trunc((min(nvl(f.updating_date,f.creation_date)) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60)),2,'_')||':'||lpad(to_char(round(mod((min(nvl(f.updating_date,f.creation_date)) - to_date(substr(SUBSTR(f.file_name, INSTR(f.file_name, '_', -1, 2)+1  ,INSTR(f.file_name, '_', -1, 2)), 1 , 14), 'YYMMDDHH24MISS'))*24*60*60,60),2)),2,'0')||'>' as "" ->"",--       substr(to_char(max(nvl(f.updating_date,f.creation_date)),'DD/MM/YYYY HH24:MI:SS'),12,8) as ""...tibco"",        null as ""   ->"",       null AS ""...END"",       max(f.account_id) as ""WHAT ?"", f.file_name NAME, f.cb_file_db_id,       html_font(1,max(CAST(f.ERROR_OBJ AS VARCHAR2(3500))),'B-error') as ""Error Desc""from cb_file f, cb_file_type cftwhere f.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and cft.cb_file_type_db_id = f.cb_file_type_db_idand f.direction = 'IN'and not exists(select 1 from CB_MSG msg where msg.cb_file_db_id=f.cb_file_db_id)group by cft.physical_file_type, f.cb_file_db_id, f.expected_msg, f.file_nameUNIONselect -- TASKS from AceTP's Scheduler       html_font(1,sd.label1,'N-'||decode(sd.code,'BRECO','blue','CLSM','fuchsia','black')) as ""FileType"",       null as ""RealTime"",       null as ""Msg/sec"",       null as ""ELAPSE(min,sec)"",       null as ""Expected_Msg"",   -- we should get this info from the TestPack parameters       null as ""Still..."",       null as PRO,       null as PEN,       to_char(qjh.start_time,'DD/MM/YYYY HH24:MI:SS') as ""BEGIN..."",       null as "" ->"",--       null as ""...tibco"",       decode(qjh.stop_time,null,'','<'||lpad(to_char(to_number(substr((qjh.stop_time - qjh.start_time),15,2))+60*to_number(substr((qjh.stop_time - qjh.start_time),12,2))),2,'_')||substr((qjh.stop_time - qjh.start_time),17,3)||'>') as ""   ->"",       decode(qjh.stop_time,null,'',substr(to_char(qjh.stop_time,'DD/MM/YYYY HH24:MI:SS'),12,8)) AS ""...END"",       null as ""WHAT ?"", t.description NAME, qjh.job_history_id,       html_font(1,cast(qjh.ERROR_MESSAGE as varchar2(3500)),'B-error') as ""Error Desc""from qrtz_job_history qjh, task t, static_data sdwhere qjh.job_name = t.job_name and t.ACTIVE = 1 and t.description like 'Test Pack%' and t.branch_db_id = <BRANCH> and t.task_deleted=0and sd.type_name='TASK_TYPE' and sd.code=t.task_typeand qjh.start_time >= to_date('<TODAY>','DD/MM/YYYY')order by ""BEGIN..."" desc, ""FileType"" ;-- [Control Board : status of CB_FILEs]select CB_FILE_DB_ID as ""FileId"", FILE_NAME as ""FileName"", STATUS_TYPE as ""Status"", FILE_SIZE as ""FileSize"", DIRECTION as ""In-Out"",        ACCOUNT_ID as ""AccountId"", BP_ROLE_ID as ""BP_role"", BP_ROLE_TYPE as ""SC-SE"", EXPECTED_MSG as ""Expected MSG"", Creation_date, Updating_date,       html_font(1,CAST(cf.ERROR_OBJ AS VARCHAR2(3500)),'B-error') as ""Error Desc""from CB_FILE cf where cf.creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [List of EXECs uploaded TODAY, per TAAC, INSOURCING_CODE, STATUS]select e.status, t.acc_nbr, e.insource_code, e.market_activity_db_id, e.sfk_acc_db_id, min(e.creation_date), max(e.updating_date), count(*) from EXEC e, TAAC twhere e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') -- and e.exec_db_id >= 1244159and t.taac_db_id = e.taac_db_idgroup by e.status, e.market_activity_db_id, t.acc_nbr, e.insource_code, e.sfk_acc_db_id ;-- [CHECK how many MAKT inx have been CREATED from MarketExecs]select e.insource_code,       i.mp_status,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       min(i.creation_date) as ""First INX started..."",       max(i.creation_date) as ""Last INX started..."",       max(i.updating_date) as ""LAST INX CREATED"",       count(distinct e.exec_db_id) as ""Nb exec"",       count(distinct i.inx_db_id) as ""Nb inx""from inx i, exec e where i.branch_db_id = <BRANCH> and e.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX' and i.type = 'MAKT'and e.inx_db_id=i.inx_db_id (+)-- and e.insource_code = 'DRKW'group by e.insource_code, i.mp_status;select e.insource_code, cm.cb_file_db_id,       max(e.creation_date) as ""Last EXEC created..."",       min(i.creation_date) as ""First INX started..."",       max(i.creation_date) as ""Last INX CREATED"",       count(distinct e.exec_db_id) as ""Nb exec"",       count(distinct i.inx_db_id) as ""Nb inx"",       '<'||lpad(to_char(trunc((max(i.creation_date) - max(e.creation_date))*24*60)),2,'_')||':'||lpad(to_char(round(mod((max(i.creation_date) - max(e.creation_date))*24*60*60,60),2)),2,'0')||'>' as ""ElapseTime (min:sec)""from inx i, exec e, exec_msg em, cb_msg cm where i.branch_db_id = <BRANCH> and e.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX' and i.type = 'MAKT'and em.exec_db_id (+)= e.exec_db_id and cm.biz_tracking_id (+)= em.exec_msgand e.inx_db_id = i.inx_db_id (+)-- and e.insource_code = 'DRKW'group by e.insource_code, cm.cb_file_db_id;-- [**********]select e.insource_code,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       count(distinct e.exec_db_id) as ""Nb exec NOT LINKED to any inx""from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX'and e.inx_db_id is nullgroup by e.insource_code ;select e.insource_code,       max(nvl(e.updating_date,e.creation_date)) as ""Last EXEC created..."",       count(distinct e.exec_db_id) as ""Nb exec LINKED to an inx""from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and e.trade_type='MAEX'and e.inx_db_id is not nullgroup by e.insource_code ;-- [**********]select e.insource_code,       sum(decode(e.reconciliation_ind,'REOK',1,0)) as REOK,       sum(decode(e.reconciliation_ind,'REKO',1,0)) as REKO,       sum(decode(e.reconciliation_ind,'BLNK',1,0)) as BLNK,       count(*)from EXEC ewhere e.trade_date=to_date('20/04/2006','DD/MM/YYYY') and e.branch_db_id = <BRANCH>and e.status='COMP'group by e.insource_code;-- [**********]select e.insource_code,       count(distinct t.exec_db_id)from EXEC e,     reco_exec_details twhere e.trade_date=to_date('20/04/2006','DD/MM/YYYY') and e.branch_db_id = <BRANCH>and e.status='COMP'and t.exec_db_id=e.exec_db_idgroup by e.insource_code;-- [**********]select e.trade_date, r.rule_name, re.rule_db_id, min(re.creation_date) as Time, e.insource_code,       sum(decode(t.trade_type,'CLEX',1,0)) as CLEX,       sum(decode(t.trade_type,'MAEX',1,0)) as MAEX,       sum(decode(t.trade_type,'NETX',1,0)) as NETX,       count(*)from EXEC e,     reco_exec_details t,     reco_exec re,     rule rwhere e.trade_date in (to_date('20/04/2006','DD/MM/YYYY'),to_date('24/04/2006','DD/MM/YYYY')) and e.branch_db_id = <BRANCH>and e.status='COMP'and t.exec_db_id=e.exec_db_idand re.reco_exec_db_id=t.reco_exec_db_idand r.rule_db_id = re.rule_db_idgroup by e.trade_date, r.rule_name, re.rule_db_id, e.insource_code;-- [**********]select e.insource_code, e.trade_type,        max(nvl(e.updating_date,e.creation_date)) as ""When... ?"",       count(*)from exec e where e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by e.insource_code, e.trade_type ;-- [CHECK how many INX have been CREATED today]select inx.type, inx.m_agent_location, inx.mp_status,       min(creation_date) as ""First INX started..."",       max(creation_date) as ""Last INX started..."",       max(updating_date) as ""LAST INX CREATED"",       count(*)from INX where inx.branch_db_id = <BRANCH> and inx.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by inx.type, inx.m_agent_location, inx.mp_status ;-- [CHECK how many INX have been CREATED or MODIFIED today]select inx.type, inx.m_agent_location, inx.mp_status,       min(creation_date) as ""First INX started..."",       max(creation_date) as ""Last INX started..."",       max(updating_date) as ""LAST INX CREATED"",       count(*)from INX where inx.branch_db_id = <BRANCH> and nvl(inx.updating_date,inx.creation_date) >= to_date('<TODAY>','DD/MM/YYYY')group by inx.type, inx.m_agent_location, inx.mp_status ;-- [CHECK impact of uploaded FILES on INSTRUCTIONS]select cf.file_name as ""File"",        0 as ""Sort"", 'Total number of messages in file (file_db_id='||cm.cb_file_db_id||')' as ""Volumes"", count(*) as ""Total_NB"", null as ""Details""from cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')group by cf.file_name, cm.cb_file_db_idUNIONselect cf.file_name as ""File"",        3 as ""Sort"", 'TOTAL nb inx impacted' as ""Volumes"", count(distinct i.inx_db_id) as ""Total_NB"", null as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_nameUNIONselect cf.file_name as ""File"",        1 as ""Sort"", 'Nb MSG (from CB_MSG) still pending' as ""Volumes"", count(*) as ""Total_NB"", null as ""Details""from cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')and cm.status_type = 'PEN'group by cf.file_nameUNIONselect cf.file_name as ""File"",        2 as ""Sort"", 'Nb MSG processed, but for which we did NOT impact any inx' as ""Volumes"", count(*) as ""Total_NB"", null as ""Details""from cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')and cm.status_type = 'PRO'and (cm.biz_tracking_id is null or not exists(select 1 from inx_sc_msg biz2 where biz2.sc_msg=cm.biz_tracking_id))group by cf.file_nameUNIONselect cf.file_name as ""File"",        4 as ""Sort"", '      => '||i.mp_status as ""Volumes"", null as ""Total_NB"", count(distinct i.inx_db_id) as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_name, i.mp_statusUNIONselect cf.file_name as ""File"",        5 as ""Sort"", 'TOTAL nb inx impacted (per AgLoc / Status)' as ""Volumes"", count(distinct i.inx_db_id) as ""Total_NB"", null as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_nameUNIONselect cf.file_name as ""File"",        6 as ""Sort"", '      => '||i.m_agent_location||' / '||i.mp_status as ""Volumes"", null as ""Total_NB"", count(distinct i.inx_db_id) as ""Details""from inx i, inx_sc_msg biz, cb_msg cm,     cb_file cf, cb_file_type cftwhere 1=1and cf.cb_file_db_id = cm.cb_file_db_id and cft.cb_file_type_db_id = cf.cb_file_type_db_id--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')and cm.status_type = 'PRO'and cm.biz_tracking_id (+)= biz.sc_msgand i.branch_db_id = <BRANCH>and i.inx_db_id = biz.inx_db_idgroup by cf.file_name, i.m_agent_location, i.mp_statusUNIONselect cf.file_name as ""File"",        7 as ""Sort"", '          ************************************************************' as ""Volumes"", null as ""Total_NB"", null as ""Details""from cb_file cf, cb_file_type cftwhere 1=1--and cf.file_name like '%SETT%CONF%' and cf.creation_date >= to_date(<TODAY>,'DD/MM/YYYY')group by cf.file_nameorder by ""File"", ""Sort"";-- [CHECK how many INX were simulated]select trunc(atm.date_time), atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after, count(*)from INX i, AUDIT_TRAIL at, AUDIT_TRAIL_MSG atmwhere at.object_db_id = i.inx_db_idand i.branch_db_id = <BRANCH>and atm.process_name = 'Clearing.INX_SIMULATION'and atm.audit_trail_db_id = at.audit_trail_db_idand atm.date_time >= to_date('<TODAY>','DD/MM/YYYY')group by trunc(atm.date_time), atm.status_before, atm.status_after, atm.reason_code_before, atm.reason_code_after;-- [List of EXECs uploaded TODAY, via TAF or SWIFT]select e.client_device, e.status, t.acc_nbr, e.insource_code, e.market_activity_db_id, e.sfk_acc_db_id, min(e.creation_date), max(e.updating_date), count(*) from EXEC e, TAAC twhere e.branch_db_id = <BRANCH> and e.creation_date >= to_date('<TODAY>','DD/MM/YYYY') -- and e.exec_db_id >= 1244159and t.taac_db_id = e.taac_db_id and e.trade_type = 'CLEX'group by e.client_device, e.status, e.market_activity_db_id, t.acc_nbr, e.insource_code, e.sfk_acc_db_id ;-- [CHECK how many INX have been CREATED today]select i.creation_media,i.mp_status, count(*), max(i.creation_date)from INX i where i.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and i.creation_media = 'SWIFT'group by i.creation_media, i.mp_status ;select i.creation_media, count(*), max(i.creation_date)from INX i where i.branch_db_id = <BRANCH> and i.creation_date >= to_date('<TODAY>','DD/MM/YYYY')and i.creation_media = 'SWIFT'group by i.creation_media ;-- [CHECK that the Task Scheduler has been correctly ""automatically"" SETUP]select * from qrtz_cron_triggers t2 where t2.trigger_name in (select trigger_name from qrtz_triggers where job_name in (select job_name from task where ACTIVE = 1 and description like 'Test Pack%' and branch_db_id = <BRANCH>));-- [ ***** END OF THE TEST PASK RESULTS ***** ]", ,,,,,,,,
TST1,Bruno Test,pf1,ITMM,atpeur90.fr.net.intra,titss210,titss202,titss314,titss404,409,data,TestPack,bin,logs,.,,RESULT of FKT COB Test Pack,testpack_FKT_COB,"-- [ ***** COB timing ***** ]select to_char(R_Time_Biznes_end, 'DD/MM/YYYY HH24:MI:SS') as When_Biznes_ENDS,       decode(sign(nvl(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                             2),                       0) - 2),              1,              html_font(1,                        to_char(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                            2)),                        'B-red'),              to_char(round((t.R_Time_Biznes_end -                             (select max(t2.R_Time_Biznes_end) from Test_Pack_Result t2 where t2.sched_tasktype != '** RESULT **' and nvl(t2.sched_processtype, 'cob') != 'Crontab'                                  and (t2.sched_tasktype != '** Standard **' or t2.sched_filetask = 'Theorical END of the COB' or t2.sched_filetask = 'Beginning of the COB')                                  and t2.R_Time_Biznes_end < t.R_Time_Biznes_end)) * 24 * 60,                                      2))) as ""Nb_minutes"",       Sched_Tasktype,       Sched_What,       Sched_Filetask,       Sched_Comment  from Test_Pack_Result t where t.sched_tasktype != '** RESULT **' and nvl(t.sched_processtype, 'cob') != 'AceTP scheduler'   and nvl(t.sched_processtype, 'cob') != 'Crontab'   and (t.sched_tasktype != '** Standard **' or t.sched_filetask = 'Theorical END of the COB' or t.sched_filetask = 'Beginning of the COB') order by r_time_biznes_end;-- [SCHEDULES]select st.sch_type_ID,st.description, s.sch_id, s.sch_db_id, s.processing_statusfrom SCH s, SCH_TYPE stwhere s.entl_establish_date = to_date('21/04/2006','DD/MM/YYYY') and s.branch_db_id = <BRANCH> and st.sch_type_db_id= s.sch_type_db_id;select cm.direction, cm.bp_role_type, cm.device, cm.msg_type, cm.status_type, count(*)from CB_MSG cmwhere cm.creation_date >= to_date('<TODAY>','DD/MM/YYYY') and cm.direction = 'OUT'group by cm.direction, cm.bp_role_type, cm.device, cm.msg_type, cm.status_type;-- [COB => Establish Entitlements]select st.sch_type_ID,st.description, s.processing_status, count(*) as ""Nb""from sch s, sch_type stwhere s.entl_establish_date = to_date('21/04/2006','DD/MM/YYYY')and s.processing_status ='ENTEST' -- or TRXGENand s.branch_db_id = <BRANCH>and st.sch_type_db_id= s.sch_type_db_idgroup by st.sch_type_ID,st.description, s.processing_status;select entl_establish_date,processing_status, count(*) from sch swhere s.entl_establish_date = to_date('21/04/2006','DD/MM/YYYY')and s.processing_status ='ENTEST' -- or TRXGENgroup by entl_establish_date,processing_status;select s.mandatory_voluntary_ind, s.category as ""Cat"", count(*) as ""Nb""from sch_entl_pos sep, sch swhere s.branch_db_id=<BRANCH> and sep.sch_db_id=s.sch_db_idgroup by s.mandatory_voluntary_ind, s.category;select s.mandatory_voluntary_ind, s.category as ""Cat"", sei.securities_way, count(*) as ""Nb""from sch_entl_inx sei, sch s where s.branch_db_id=<BRANCH> and sei.sch_db_id=s.sch_db_idgroup by s.mandatory_voluntary_ind, s.category, sei.securities_way;-- [COB => Send Daily TBR File]select t.code, count(*) from record twhere t.class_name like '%ebr.out.techrepair%' and t.business_date = to_date('21/04/2006','DD/MM/YYYY') group by t.code;-- [COB => Send MT 566 for unconfirmed sett for grouped movements]select 'Nb of mvts', count(*) from cy_mvt tinner join cy_trx ct on ct.cy_trx_db_id = t.cy_trx_db_idinner join sch s on s.sch_db_id = ct.sch_db_idwhere t.status = 'SETT' and t.ca_confirmation_history_db_id is nulland t.expected_sett_date_time = to_date('21/04/2006','DD/MM/YYYY') and s.branch_db_id = <BRANCH>;select account_id, device, count(*) from cb_msgwhere msg_type = '566'and creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by account_id, device;-- [COB => Send Daily +Monthly Biling file]select r.code, count(*) from record rwhere r.class_name like '%EBROutParsedSettTrxRecord'and r.business_date=to_date('21/04/2006','DD/MM/YYYY') group by r.code;-- [COB => Generate Statement of holdings]select 'Generate Statement of holdings', count(*) as ""Nb""from cb_msg c where c.msg_type = '535'and c.device = 'SWIFT'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Generate Statement of holdings to PBLink]select account_id, count(*) from cb_msg c where c.msg_type = '535'and c.device = 'PBLink'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by account_id;-- [COB => Generate Notice of Events/Generate reminders]select 'Generate Notice of Events/Generate reminders', count(*) as ""Nb"" from cb_msg c where c.msg_type = '564'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Generate Statement of settled transaction]select 'Generate Statement of settled transaction', count(*) as ""Nb""from cb_msg c where c.msg_type = '536'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Create and Send Credit Line Usage to BEACON]select p.expected_records, p.processed_records, p.rejected_recordsfrom process_log p where process_name = 'JATPIT_SndCLUsg' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Overnight Client Position report (JATPIT_EODPosRp)]select p.expected_records, p.processed_records, p.rejected_recordsfrom process_log p where process_name = 'JATPIT_EODPosRp' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');-- [COB => Receive and Update Customers from MIDAS]select * from client c where c.client_id='200097';select * from imported_customer ic where ic.customer_id='201244';-- [COB => Change of Actual Settlement Date]select b.code, c.logical_business_day, i.mp_asd, i.mp_status, s.sc_id, count(i.mp_asd)from inx i, branch b, calendar c, sc swhere i.mp_status not in ('SETT', 'CAND', 'REJT', 'RECO')and b.branch_db_id = i.branch_db_idand c.calendar_db_id = b.calendar_db_idand s.sc_db_id = i.m_sc_db_id_scand i.branch_db_id = <BRANCH>group by b.code, c.logical_business_day, i.mp_asd, i.mp_status, s.sc_id;-- [COB => Generate Statement of pending transaction]select p.expected_records, p.processed_records, p.rejected_recordsfrom process_log p where process_name = 'JATPIT_PStmSw' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');select account_id, count(*) from cb_msg c where c.msg_type = '537'and c.direction = 'OUT' and c.branch_db_id=<BRANCH>and creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by account_id;-- [COB => Receive ABS Final Investor detailselect t.type, t.fiscal_country, count(*) as ""Nb"" from fnl_invstr t group by t.type, t.fiscal_country;-- [COB => Receive ABS Final Investor Reference]select 'ABS Final Investor Reference', count(*) as ""Nb"" from fnl_invstr_reference;-- [COB => Receive ABS Final Investor GP]select 'ABS Final Investor GP', count(*) as ""Nb"" from fnl_invstr_individual;-- [COB => Receive and Update Cash Accounts from MIDAS]select t.ca_status, t.midas_collateral_acc, t.ca_ccy, count(*) as ""Nb""from int_cash_acc tgroup by t.ca_status, t.midas_collateral_acc, t.ca_ccy;-- [COB => Receive and Update Credit Lines from BEACON]select * from credit_line cl where (cl.creation_date >= to_date('<TODAY>','DD/MM/YYYY') or cl.updating_date >= to_date('<TODAY>','DD/MM/YYYY'));-- [COB => Receive and Update Opening Balances from MIDAS]select b.code, count(*) from open_balance_cash_pos obinner join int_cash_acc ca on ca.int_cash_acc_db_id = ob.int_cash_acc_db_idinner join client cl on cl.client_db_id = ca.client_db_idinner join entity e on e.entity_db_id = cl.entity_db_idinner join branch b on b.branch_db_id = e.branch_db_idinner join calendar c on c.calendar_db_id = b.calendar_db_idwhere ob.pos_date = c.logical_business_daygroup by b.code;-- [COB => Initialize Reserved Amount]select b.code, count(*)from risk_ctrl rs inner join branch b on b.branch_db_id = rs.branch_db_id inner join calendar c on c.calendar_db_id = b.calendar_db_id where rs.risk_ctrl_date = c.logical_business_day group by b.code;-- [COB => Re-activate suspended clients and accounts]select at.actual_biz_class_name,count(*)from audit_trail atinner join audit_trail_msg am on am.audit_trail_db_id = at.audit_trail_db_idwhere at.actual_biz_class_name in ('CLIENT','SFK_ACC')and at.creation_date >= to_date('<TODAY>','DD/MM/YYYY')group by at.actual_biz_class_name;-- [COB => Generate Corporate Action Transactions]select ct.branch_db_id, ct.sch_db_id, count(ct.cy_trx_db_id) from cy_trx ctinner join sch on sch.sch_db_id = ct.sch_db_idinner join process_log p on p.process_name = 'JATPIT_GenCATrx' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY')where ct.creation_date between p.start_datetime and p.end_datetimegroup by ct.branch_db_id, ct.sch_db_id;-- [COB => Settlement of CY transactions/Generate Client confirmations]select * from cb_msg cb join process_log p on p.process_name= 'JATPDE_SettCYMv' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY')where cb.msg_type = '566' and p.start_datetime >= to_date('<TODAY>','DD/MM/YYYY');-- [ ***** END OF THE TEST PASK RESULTS ***** ]", ,,,,,,,,
TST2,Test n2,pf1,ITMM,atpeur90.fr.net.intra,titss210,titss202,titss314,titss404,409,data,TestPack,bin,logs,.,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
???,???,pf1,ITMM,atpeur90.fr.net.intra,titss210,titss202,titss314,titss404,409,data,TestPack,bin,logs,.,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,, ,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,
,,,,,,,,,,,,,,,,,,,,,,,,,,,